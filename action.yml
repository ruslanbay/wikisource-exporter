name: 'WikiSource Exporter'
description: 'WikiSource Exporter is a tool for exporting Wikisource documents to many formats, such as EPUB or PDF'
author: 'ruslanbay'

inputs:
  title:
    description: 'Page title (e.g. Constitution_of_the_United_States_of_America)'
    required: true
  lang:
    description: 'Language code: ru, en, de, fr, ...'
    required: true
    default: 'en'
  format:
    description: 'Output format: txt, epub, pdf'
    required: true
    default: 'txt'
  nocredits:
    description: 'Do not include the credits list in the exported document'
    required: false
    default: 'true'
  nocache:
    description: 'Do not cache anything (re-fetch all data)'
    required: false
    default: 'false'

runs:
  using: 'docker'
  image: 'docker://ghcr.io/ruslanbay/wikisource-exporter:latest'
  entrypoint: '/bin/sh'
  args:
    - -c
    - |
      mkdir -p /github/workspace/output && \
      php ./bin/console app:export \
        ${{ inputs.nocredits == 'true' && '--nocredits' || '' }} \
        ${{ inputs.nocache == 'true' && '--nocache' || '' }} \
        --lang "${{ inputs.lang }}" \
        --format "${{ inputs.format }}" \
        --title "${{ inputs.title }}" \
        --path "/github/workspace/output/"

branding:
  icon: 'book'
  color: 'blue'